/*! SmartAdmin - v1.5 - 2014-10-16 */

function checkURL() {
	var a = location.href.split("#").splice(1).join("#");
	if(!a) try {
		var b = window.document.URL;
		b && b.indexOf("#", 0) > 0 && b.indexOf("#", 0) < b.length + 1 && (a = b.substring(b.indexOf("#", 0) + 1))
	} catch(c) {}
	if(container = $("#content"), a) {
		$("nav li.active").removeClass("active"), $('nav li:has(a[href="' + a + '"])').addClass("active");
		var d = $('nav a[href="' + a + '"]').attr("title");
		document.title = d || document.title, debugState && root.console.log("Page title: %c " + document.title, debugStyle_green), loadURL(a + location.search, container)
	} else {
		var e = $('nav > ul > li:first-child > a[href!="#"]');
		window.location.hash = e.attr("href"), e = null
	}
}

function loadURL(a, b) {
	debugState && root.root.console.log("Loading URL: %c" + a, debugStyle), $.ajax({
		"type": "GET",
		"url": a,
		"dataType": "html",
		"cache": !0,
		"beforeSend": function() {
			if($.navAsAjax && $(".google_maps")[0] && b[0] == $("#content")[0]) {
				var a = $(".google_maps"),
					c = 0;
				a.each(function() {
					c++;
					var b = document.getElementById(this.id);
					c == a.length + 1 || (b && b.parentNode.removeChild(b), debugState && root.console.log("Destroying maps.........%c" + this.id, debugStyle_warning))
				}), debugState && root.console.log("\u2714 Google map instances nuked!!!")
			}
			if($.navAsAjax && $(".dataTables_wrapper")[0] && b[0] == $("#content")[0]) {
				var d = $.fn.dataTable.fnTables(!0);
				$(d).each(function() { 0 != $(this).find(".details-control").length ? ($(this).find("*").addBack().off().remove(), $(this).dataTable().fnDestroy()) : $(this).dataTable().fnDestroy() }), debugState && root.console.log("\u2714 Datatable instances nuked!!!")
			}
			if($.navAsAjax && $.intervalArr.length > 0 && b[0] == $("#content")[0] && enableJarvisWidgets) {
				for(; $.intervalArr.length > 0;) clearInterval($.intervalArr.pop());
				debugState && root.console.log("\u2714 All JarvisWidget intervals cleared")
			}
			if($.navAsAjax && b[0] == $("#content")[0] && enableJarvisWidgets && $("#widget-grid")[0] && ($("#widget-grid").jarvisWidgets("destroy"), debugState && root.console.log("\u2714 JarvisWidgets destroyed")), $.navAsAjax && b[0] == $("#content")[0]) { if("function" == typeof pagedestroy) try { pagedestroy(), debugState && root.console.log("\u2714 Pagedestroy()") } catch(e) { pagedestroy = void 0, debugState && root.console.log("! Pagedestroy() Catch Error") } $.fn.sparkline && $("#content .sparkline")[0] && ($("#content .sparkline").sparkline("destroy"), debugState && root.console.log("\u2714 Sparkline Charts destroyed!")), $.fn.easyPieChart && $("#content .easy-pie-chart")[0] && ($("#content .easy-pie-chart").easyPieChart("destroy"), debugState && root.console.log("\u2714 EasyPieChart Charts destroyed!")), $.fn.select2 && $("#content select.select2")[0] && ($("#content select.select2").select2("destroy"), debugState && root.console.log("\u2714 Select2 destroyed!")), $.fn.mask && $("#content [data-mask]")[0] && ($("#content [data-mask]").unmask(), debugState && root.console.log("\u2714 Input Mask destroyed!")), $.fn.datepicker && $("#content .datepicker")[0] && ($("#content .datepicker").off(), $("#content .datepicker").remove(), debugState && root.console.log("\u2714 Datepicker destroyed!")), $.fn.slider && $("#content .slider")[0] && ($("#content .slider").off(), $("#content .slider").remove(), debugState && root.console.log("\u2714 Bootstrap Slider destroyed!")) } pagefunction = null, b.removeData().html(""), b.html('<h1 class="ajax-loading-animation"><i class="fa fa-cog fa-spin"></i> Loading...</h1>'), b[0] == $("#content")[0] && ($("body").find("> *").filter(":not(" + ignore_key_elms + ")").empty().remove(), drawBreadCrumb(), $("html").animate({ "scrollTop": 0 }, "fast"))
		},
		"success": function(a) { b.css({ "opacity": "0.0" }).html(a).delay(50).animate({ "opacity": "1.0" }, 300), a = null, b = null },
		"error": function(c, d, e) { b.html('<h4 class="ajax-loading-error"><i class="fa fa-warning txt-color-orangeDark"></i> Error requesting <span class="txt-color-red">' + a + "</span>: " + c.status + ' <span style="text-transform: capitalize;">' + e + "</span></h4>") },
		"async": !0
	})
}

function drawBreadCrumb(a) {
	var b = $("nav li.active > a"),
		c = b.length;
	bread_crumb.empty(), bread_crumb.append($("<li>Home</li>")), b.each(function() { bread_crumb.append($("<li></li>").html($.trim($(this).clone().children(".badge").remove().end().text()))), --c || (document.title = bread_crumb.find("li:last-child").text()) }), void 0 != a && $.each(a, function(a, b) { bread_crumb.append($("<li></li>").html(b)), document.title = bread_crumb.find("li:last-child").text() })
}

function getParam(a) {
	a = a.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
	var b = "[\\?&]" + a + "=([^&#]*)",
		c = new RegExp(b),
		d = c.exec(window.location.href);
	return null == d ? "" : d[1]
}
$.intervalArr = [];
var calc_navbar_height = function() { var a = null; return $("#header").length && (a = $("#header").height()), null === a && (a = $('<div id="header"></div>').height()), null === a ? 49 : a },
	navbar_height = calc_navbar_height,
	shortcut_dropdown = $("#shortcut"),
	bread_crumb = $("#ribbon ol.breadcrumb"),
	topmenu = !1,
	thisDevice = null,
	ismobile = /iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()),
	jsArray = {},
	initApp = function(a) {
		return a.addDeviceType = function() { return ismobile ? ($.root_.addClass("mobile-detected"), thisDevice = "mobile", fastClick ? ($.root_.addClass("needsclick"), FastClick.attach(document.body), !1) : void 0) : ($.root_.addClass("desktop-detected"), thisDevice = "desktop", !1) }, a.menuPos = function() {
			($.root_.hasClass("menu-on-top") || "top" == localStorage.getItem("sm-setmenu")) && (topmenu = !0, $.root_.addClass("menu-on-top"))
		}, a.SmartActions = function() {
			var a = {
				"userLogout": function(a) {
					function b() { window.location = a.attr("href") } $.SmartMessageBox({ "title": "<i class='fa fa-sign-out txt-color-orangeDark'></i> Logout <span class='txt-color-orangeDark'><strong>" + $("#show-shortcut").text() + "</strong></span> ?", "content": a.data("logout-msg") || "You can improve your security further after logging out by closing this opened browser", "buttons": "[No][Yes]" }, function(a) { "Yes" == a && ($.root_.addClass("animated fadeOutUp"), setTimeout(b, 1e3)) })
				},
				"resetWidgets": function(a) { $.SmartMessageBox({ "title": "<i class='fa fa-refresh' style='color:green'></i> Clear Local Storage", "content": a.data("reset-msg") || "Would you like to RESET all your saved widgets and clear LocalStorage?1", "buttons": "[No][Yes]" }, function(a) { "Yes" == a && localStorage && (localStorage.clear(), location.reload()) }) },
				"launchFullscreen": function(a) { $.root_.hasClass("full-screen") ? ($.root_.removeClass("full-screen"), document.exitFullscreen ? document.exitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen && document.webkitExitFullscreen()) : ($.root_.addClass("full-screen"), a.requestFullscreen ? a.requestFullscreen() : a.mozRequestFullScreen ? a.mozRequestFullScreen() : a.webkitRequestFullscreen ? a.webkitRequestFullscreen() : a.msRequestFullscreen && a.msRequestFullscreen()) },
				"minifyMenu": function(a) { $.root_.hasClass("menu-on-top") || ($.root_.toggleClass("minified"), $.root_.removeClass("hidden-menu"), $("html").removeClass("hidden-menu-mobile-lock"), a.effect("highlight", {}, 500)) },
				"toggleMenu": function() { $.root_.hasClass("menu-on-top") ? $.root_.hasClass("menu-on-top") && $(window).width() < 979 && ($("html").toggleClass("hidden-menu-mobile-lock"), $.root_.toggleClass("hidden-menu"), $.root_.removeClass("minified")) : ($("html").toggleClass("hidden-menu-mobile-lock"), $.root_.toggleClass("hidden-menu"), $.root_.removeClass("minified")) },
				"toggleShortcut": function() {
					function a() { shortcut_dropdown.animate({ "height": "hide" }, 300, "easeOutCirc"), $.root_.removeClass("shortcut-on") }

					function b() { shortcut_dropdown.animate({ "height": "show" }, 200, "easeOutCirc"), $.root_.addClass("shortcut-on") } shortcut_dropdown.is(":visible") ? a() : b(), shortcut_dropdown.find("a").click(function(b) { b.preventDefault(), window.location = $(this).attr("href"), setTimeout(a, 300) }), $(document).mouseup(function(b) { shortcut_dropdown.is(b.target) || 0 !== shortcut_dropdown.has(b.target).length || a() })
				}
			};
			$.root_.on("click", '[data-action="userLogout"]', function(b) {
				var c = $(this);
				a.userLogout(c), b.preventDefault(), c = null
			}), $.root_.on("click", '[data-action="resetWidgets"]', function(b) {
				var c = $(this);
				a.resetWidgets(c), b.preventDefault(), c = null
			}), $.root_.on("click", '[data-action="launchFullscreen"]', function(b) { a.launchFullscreen(document.documentElement), b.preventDefault() }), $.root_.on("click", '[data-action="minifyMenu"]', function(b) {
				var c = $(this);
				a.minifyMenu(c), b.preventDefault(), c = null
			}), $.root_.on("click", '[data-action="toggleMenu"]', function(b) { a.toggleMenu(), b.preventDefault() }), $.root_.on("click", '[data-action="toggleShortcut"]', function(b) { a.toggleShortcut(), b.preventDefault() })
		}, a.leftNav = function() { topmenu || $("nav ul").jarvismenu({ "accordion": menu_accordion || !0, "speed": menu_speed || !0, "closedSign": '<em class="fa fa-plus-square-o"></em>', "openedSign": '<em class="fa fa-minus-square-o"></em>' }) }, a.domReadyMisc = function() {
			$("[rel=tooltip]").length && $("[rel=tooltip]").tooltip(), $("#search-mobile").click(function() { $.root_.addClass("search-mobile") }), $("#cancel-search-js").click(function() { $.root_.removeClass("search-mobile") }), $("#activity").click(function(a) {
				var b = $(this);
				b.find(".badge").hasClass("bg-color-red") && (b.find(".badge").removeClassPrefix("bg-color-"), b.find(".badge").text("0")), b.next(".ajax-dropdown").is(":visible") ? (b.next(".ajax-dropdown").fadeOut(150), b.removeClass("active")) : (b.next(".ajax-dropdown").fadeIn(150), b.addClass("active"));
				var c = b.next(".ajax-dropdown").find(".btn-group > .active > input").attr("id");
				b = null, c = null, a.preventDefault()
			}), $('input[name="activity"]').change(function() {
				var a = $(this);
				url = a.attr("id"), container = $(".ajax-notifications"), loadURL(url, container), a = null
			}), $(document).mouseup(function(a) { $(".ajax-dropdown").is(a.target) || 0 !== $(".ajax-dropdown").has(a.target).length || ($(".ajax-dropdown").fadeOut(150), $(".ajax-dropdown").prev().removeClass("active")) }), $("button[data-btn-loading]").on("click", function() {
				var a = $(this);
				a.button("loading"), setTimeout(function() { a.button("reset") }, 3e3)
			}), $this = $("#activity > .badge"), parseInt($this.text()) > 0 && ($this.addClass("bg-color-red bounceIn animated"), $this = null)
		}, a.mobileCheckActivation = function() { $(window).width() < 979 ? ($.root_.addClass("mobile-view-activated"), $.root_.removeClass("minified")) : $.root_.hasClass("mobile-view-activated") && $.root_.removeClass("mobile-view-activated"), debugState && console.log("mobileCheckActivation") }, a
	}({});

$.navAsAjax && ($("nav").length && checkURL(), $(document).on("click", 'nav a[href!="#"]', function(a) {
	a.preventDefault();
	var b = $(a.currentTarget);
	b.parent().hasClass("active") || b.attr("target") || ($.root_.hasClass("mobile-view-activated") ? ($.root_.removeClass("hidden-menu"), $("html").removeClass("hidden-menu-mobile-lock"), window.setTimeout(function() { window.location.search ? window.location.href = window.location.href.replace(window.location.search, "").replace(window.location.hash, "") + "#" + b.attr("href") : window.location.hash = b.attr("href") }, 150)) : window.location.search ? window.location.href = window.location.href.replace(window.location.search, "").replace(window.location.hash, "") + "#" + b.attr("href") : window.location.hash = b.attr("href"))
}), $(document).on("click", 'nav a[target="_blank"]', function(a) {
	a.preventDefault();
	var b = $(a.currentTarget);
	window.open(b.attr("href"))
}), $(document).on("click", 'nav a[target="_top"]', function(a) {
	a.preventDefault();
	var b = $(a.currentTarget);
	window.location = b.attr("href")
}), $(document).on("click", 'nav a[href="#"]', function(a) { a.preventDefault() }), $(window).on("hashchange", function() { checkURL() })), $("body").on("click", function(a) { $('[rel="popover"], [data-rel="popover"]').each(function() { $(this).is(a.target) || 0 !== $(this).has(a.target).length || 0 !== $(".popover").has(a.target).length || $(this).popover("hide") }) }), $("body").on("hidden.bs.modal", ".modal", function() { $(this).removeData("bs.modal") });